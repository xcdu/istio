{
    "url": "https://istio.io/latest/docs/tasks/traffic-management/ingress/secure-ingress/",
    "title": "Istio / Secure Gateways",
    "page_indexer": "docs$tasks$traffic-management$ingress$secure-ingress",
    "raw": "<!DOCTYPE html><html lang=\"en\" itemscope=\"\" itemtype=\"https://schema.org/WebPage\"><head><meta charset=\"utf-8\"><meta http-equiv=\"x-ua-compatible\" content=\"IE=edge\"><meta name=\"viewport\" content=\"width=device-width,initial-scale=1,shrink-to-fit=no\"><meta name=\"theme-color\" content=\"#466BB0\"><meta name=\"title\" content=\"Secure Gateways\"><meta name=\"description\" content=\"Expose a service outside of the service mesh over TLS or mTLS.\"><meta name=\"keywords\" content=\"microservices,services,mesh,traffic-management,ingress,sds-credentials\"><meta property=\"og:title\" content=\"Secure Gateways\"><meta property=\"og:type\" content=\"website\"><meta property=\"og:description\" content=\"Expose a service outside of the service mesh over TLS or mTLS.\"><meta property=\"og:url\" content=\"/latest/docs/tasks/traffic-management/ingress/secure-ingress/\"><meta property=\"og:image\" content=\"/latest/img/istio-whitelogo-bluebackground-framed.svg\"><meta property=\"og:image:alt\" content=\"Istio Logo\"><meta property=\"og:image:width\" content=\"112\"><meta property=\"og:image:height\" content=\"150\"><meta property=\"og:site_name\" content=\"Istio\"><meta name=\"twitter:card\" content=\"summary\"><meta name=\"twitter:site\" content=\"@IstioMesh\"><title>Istio / Secure Gateways</title><script type=\"text/javascript\" async=\"\" src=\"https://www.google-analytics.com/analytics.js\"></script><script async=\"\" src=\"https://www.googletagmanager.com/gtag/js?id=UA-98480406-1\"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}\ngtag('js',new Date());gtag('config','UA-98480406-1');</script><link rel=\"alternate\" type=\"application/rss+xml\" title=\"Istio Blog\" href=\"/latest/blog/feed.xml\"><link rel=\"alternate\" type=\"application/rss+xml\" title=\"Istio News\" href=\"/latest/news/feed.xml\"><link rel=\"alternate\" type=\"application/rss+xml\" title=\"Istio Blog and News\" href=\"/latest/feed.xml\"><link rel=\"shortcut icon\" href=\"/latest/favicons/favicon.ico\"><link rel=\"apple-touch-icon\" href=\"/latest/favicons/apple-touch-icon-180x180.png\" sizes=\"180x180\"><link rel=\"icon\" type=\"image/png\" href=\"/latest/favicons/favicon-16x16.png\" sizes=\"16x16\"><link rel=\"icon\" type=\"image/png\" href=\"/latest/favicons/favicon-32x32.png\" sizes=\"32x32\"><link rel=\"icon\" type=\"image/png\" href=\"/latest/favicons/android-36x36.png\" sizes=\"36x36\"><link rel=\"icon\" type=\"image/png\" href=\"/latest/favicons/android-48x48.png\" sizes=\"48x48\"><link rel=\"icon\" type=\"image/png\" href=\"/latest/favicons/android-72x72.png\" sizes=\"72x72\"><link rel=\"icon\" type=\"image/png\" href=\"/latest/favicons/android-96x96.png\" sizes=\"96xW96\"><link rel=\"icon\" type=\"image/png\" href=\"/latest/favicons/android-144x144.png\" sizes=\"144x144\"><link rel=\"icon\" type=\"image/png\" href=\"/latest/favicons/android-192x192.png\" sizes=\"192x192\"><link rel=\"manifest\" href=\"/latest/manifest.json\"><meta name=\"apple-mobile-web-app-title\" content=\"Istio\"><meta name=\"application-name\" content=\"Istio\"><link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Work+Sans:400|Chivo:400|Work+Sans:500,300,600,300italic,400italic,500italic,600italic|Chivo:500,300,600,300italic,400italic,500italic,600italic\"><link rel=\"stylesheet\" href=\"/latest/css/all.css\"><script src=\"/latest/js/themes_init.min.js\"></script></head><body class=\"language-unknown\"><script>const branchName=\"release-1.8\";const docTitle=\"Secure Gateways\";const iconFile=\"\\/latest/img/icons.svg\";const buttonCopy='Copy to clipboard';const buttonPrint='Print';const buttonDownload='Download';</script><script src=\"https://www.google.com/cse/brand?form=search-form\" defer=\"\"></script><script src=\"/latest/js/all.min.js\" data-manual=\"\" defer=\"\"></script><header><nav><a id=\"brand\" href=\"/latest/\"><span class=\"logo\"><svg viewBox=\"0 0 300 300\"><circle cx=\"150\" cy=\"150\" r=\"146\" stroke-width=\"2\"></circle><polygon points=\"65 240 225 240 125 270\"></polygon><polygon points=\"65 230 125 220 125 110\"></polygon><polygon points=\"135 220 225 230 135 30\"></polygon></svg></span><span class=\"name\">Istio 1.8</span></a><div id=\"hamburger\"><svg class=\"icon hamburger\"><use xlink:href=\"/latest/img/icons.svg#hamburger\"></use></svg></div><div id=\"header-links\"><a class=\"current\" title=\"Learn how to deploy, use, and operate Istio.\" href=\"/latest/docs/\">Docs</a>\n<a title=\"Posts about using Istio.\" href=\"/latest/blog/2020/\">Blog<i class=\"dot\" data-prefix=\"/blog\"></i></a>\n<a title=\"Timely news about the Istio project.\" href=\"/latest/news/\">News<i class=\"dot\" data-prefix=\"/news\"></i></a>\n<a title=\"Frequently Asked Questions about Istio.\" href=\"/latest/faq/\">FAQ</a>\n<a title=\"Get a bit more in-depth info about the Istio project.\" href=\"/latest/about/\">About</a><div class=\"menu\"><button id=\"gearDropdownButton\" class=\"menu-trigger\" title=\"Options and settings\" aria-label=\"Options and Settings\" aria-controls=\"gearDropdownContent\"><svg class=\"icon gear\"><use xlink:href=\"/latest/img/icons.svg#gear\"></use></svg></button><div id=\"gearDropdownContent\" class=\"menu-content\" aria-labelledby=\"gearDropdownButton\" role=\"menu\"><a tabindex=\"-1\" role=\"menuitem\" lang=\"en\" id=\"switch-lang-en\" class=\"active\">English</a>\n<a tabindex=\"-1\" role=\"menuitem\" lang=\"zh\" id=\"switch-lang-zh\">中文</a><div role=\"separator\"></div><a tabindex=\"-1\" role=\"menuitem\" class=\"active\" id=\"light-theme-item\">Light Theme</a>\n<a tabindex=\"-1\" role=\"menuitem\" id=\"dark-theme-item\">Dark Theme</a><div role=\"separator\"></div><a tabindex=\"-1\" role=\"menuitem\" id=\"syntax-coloring-item\">Color Examples</a><div role=\"separator\"></div><a tabindex=\"-1\" role=\"menuitem\" href=\"https://github.com/istio/istio.io/edit/release-1.8/content/en/docs/tasks/traffic-management/ingress/secure-ingress/index.md\">Edit this Page on GitHub</a>\n<a tabindex=\"-1\" role=\"menuitem\" href=\"https://github.com/istio/istio.io/issues/new?title=Issue%20with%20docs%2ftasks%2ftraffic-management%2fingress%2fsecure-ingress%2findex.md\">Report Site Bugs</a><div role=\"separator\"></div><h6>Other versions of this site</h6><a tabindex=\"-1\" role=\"menuitem\" onclick=\"navigateToUrlOrRoot('https://preliminary.istio.io/docs\\/tasks\\/traffic-management\\/ingress\\/secure-ingress\\/');return false;\">Next Release</a>\n<a tabindex=\"-1\" role=\"menuitem\" href=\"https://istio.io/archive\">Older Releases</a></div></div><button id=\"search-show\" title=\"Search this site\" aria-label=\"Search\"><svg class=\"icon magnifier\"><use xlink:href=\"/latest/img/icons.svg#magnifier\"></use></svg></button></div><form id=\"search-form\" name=\"cse\" role=\"search\"><input type=\"hidden\" name=\"cx\" value=\"002184991200833970123:veyyqmfmpj4\">\n<input type=\"hidden\" name=\"ie\" value=\"utf-8\">\n<input type=\"hidden\" name=\"hl\" value=\"en\">\n<input type=\"hidden\" id=\"search-page-url\" value=\"/latest/search\">\n<input id=\"search-textbox\" class=\"form-control\" name=\"q\" type=\"search\" aria-label=\"Search this site\">\n<button id=\"search-close\" title=\"Cancel search\" type=\"reset\" aria-label=\"Cancel search\"><svg class=\"icon cancel-x\"><use xlink:href=\"/latest/img/icons.svg#cancel-x\"></use></svg></button></form></nav></header><div class=\"banner-container\"></div><main class=\"primary\"><div id=\"sidebar-container\" class=\"sidebar-container sidebar-offcanvas\"><nav id=\"sidebar\" aria-label=\"Section Navigation\"><div class=\"directory\"><div class=\"card\"><button class=\"header dynamic\" id=\"card17\" title=\"Learn about the different parts of the Istio system and the abstractions it uses.\" aria-controls=\"card17-body\"><svg class=\"icon concepts\"><use xlink:href=\"/latest/img/icons.svg#concepts\"></use></svg>Concepts</button><div class=\"body\" aria-labelledby=\"card17\" role=\"region\" id=\"card17-body\"><ul role=\"tree\" aria-expanded=\"true\" class=\"leaf-section\" aria-labelledby=\"card17\"><li role=\"none\"><a role=\"treeitem\" title=\"Introduces Istio, the problems it solves, its high-level architecture, and its design goals.\" href=\"/latest/docs/concepts/what-is-istio/\">What is Istio?</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes the various Istio features focused on traffic routing and control.\" href=\"/latest/docs/concepts/traffic-management/\">Traffic Management</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes Istio's authorization and authentication functionality.\" href=\"/latest/docs/concepts/security/\">Security</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes the telemetry and monitoring features provided by Istio.\" href=\"/latest/docs/concepts/observability/\">Observability</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes Istio's WebAssembly Plugin system.\" href=\"/latest/docs/concepts/wasm/\">Extensibility</a></li></ul></div></div><div class=\"card\"><button class=\"header dynamic\" id=\"card40\" title=\"Instructions for installing the Istio control plane on Kubernetes.\" aria-controls=\"card40-body\"><svg class=\"icon setup\"><use xlink:href=\"/latest/img/icons.svg#setup\"></use></svg>Setup</button><div class=\"body\" aria-labelledby=\"card40\" role=\"region\" id=\"card40-body\"><ul role=\"tree\" aria-expanded=\"true\" aria-labelledby=\"card40\"><li role=\"none\"><a role=\"treeitem\" title=\"Try Istio’s features quickly and easily.\" href=\"/latest/docs/setup/getting-started/\">Getting Started</a></li><li role=\"treeitem\" aria-label=\"Platform Setup\"><button aria-hidden=\"true\"></button><a title=\"How to prepare various Kubernetes platforms before installing Istio.\" href=\"/latest/docs/setup/platform-setup/\">Platform Setup</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Instructions to setup an Alibaba Cloud Kubernetes cluster for Istio.\" href=\"/latest/docs/setup/platform-setup/alicloud/\">Alibaba Cloud</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Instructions to setup an Azure cluster for Istio.\" href=\"/latest/docs/setup/platform-setup/azure/\">Azure</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Instructions to setup Docker Desktop for Istio.\" href=\"/latest/docs/setup/platform-setup/docker/\">Docker Desktop</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Instructions to setup a Google Kubernetes Engine cluster for Istio.\" href=\"/latest/docs/setup/platform-setup/gke/\">Google Kubernetes Engine</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Instructions to setup an IBM Cloud cluster for Istio.\" href=\"/latest/docs/setup/platform-setup/ibm/\">IBM Cloud</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Instructions to setup kind for Istio.\" href=\"/latest/docs/setup/platform-setup/kind/\">kind</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Instructions to setup Kops for use with Istio.\" href=\"/latest/docs/setup/platform-setup/kops/\">Kops</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Instructions to setup a Gardener cluster for Istio.\" href=\"/latest/docs/setup/platform-setup/gardener/\">Kubernetes Gardener</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Instructions to setup a KubeSphere Container Platform for Istio.\" href=\"/latest/docs/setup/platform-setup/kubesphere/\">KubeSphere Container Platform</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Instructions to setup MicroK8s for use with Istio.\" href=\"/latest/docs/setup/platform-setup/microk8s/\">MicroK8s</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Instructions to setup minikube for Istio.\" href=\"/latest/docs/setup/platform-setup/minikube/\">Minikube</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Instructions to setup an OpenShift cluster for Istio.\" href=\"/latest/docs/setup/platform-setup/openshift/\">OpenShift</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Instructions to setup an OKE cluster for Istio.\" href=\"/latest/docs/setup/platform-setup/oci/\">Oracle Cloud Infrastructure</a></li></ul></li><li role=\"treeitem\" aria-label=\"Install\"><button aria-hidden=\"true\"></button><a title=\"Choose the guide that best suits your needs and platform.\" href=\"/latest/docs/setup/install/\">Install</a><ul role=\"group\" aria-expanded=\"false\"><li role=\"none\"><a role=\"treeitem\" title=\"Install and customize any Istio configuration profile for in-depth evaluation or production use.\" href=\"/latest/docs/setup/install/istioctl/\">Install with Istioctl</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Instructions to install Istio in a Kubernetes cluster using the Istio operator.\" href=\"/latest/docs/setup/install/operator/\">Istio Operator Install</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Install and configure Istio for in-depth evaluation.\" href=\"/latest/docs/setup/install/helm/\">Install with Helm</a></li><li role=\"treeitem\" aria-label=\"Install Multicluster\"><button aria-hidden=\"true\"></button><a title=\"Install an Istio mesh across multiple Kubernetes clusters.\" href=\"/latest/docs/setup/install/multicluster/\">Install Multicluster</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Initial steps before installing Istio on multiple clusters.\" href=\"/latest/docs/setup/install/multicluster/before-you-begin/\">Before you begin</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Install an Istio mesh across multiple primary clusters.\" href=\"/latest/docs/setup/install/multicluster/multi-primary/\">Install Multi-Primary</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Install an Istio mesh across primary and remote clusters.\" href=\"/latest/docs/setup/install/multicluster/primary-remote/\">Install Primary-Remote</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Install an Istio mesh across multiple primary clusters on different networks.\" href=\"/latest/docs/setup/install/multicluster/multi-primary_multi-network/\">Install Multi-Primary on different networks</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Install an Istio mesh across primary and remote clusters on different networks.\" href=\"/latest/docs/setup/install/multicluster/primary-remote_multi-network/\">Install Primary-Remote on different networks</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Verify that Istio has been installed properly on multiple clusters.\" href=\"/latest/docs/setup/install/multicluster/verify/\">Verify the installation</a></li></ul></li><li role=\"none\"><a role=\"treeitem\" title=\"Deploy Istio and connect a workload running within a virtual machine to it.\" href=\"/latest/docs/setup/install/virtual-machine/\">Virtual Machine Installation</a></li></ul></li><li role=\"treeitem\" aria-label=\"Upgrade\"><button aria-hidden=\"true\"></button><a title=\"Upgrade, downgrade, and manage Istio accross multiple control plane revisions.\" href=\"/latest/docs/setup/upgrade/\">Upgrade</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Upgrade Istio by first running a canary deployment of a new control plane.\" href=\"/latest/docs/setup/upgrade/canary/\">Canary Upgrades</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Upgrade or downgrade Istio in place.\" href=\"/latest/docs/setup/upgrade/in-place/\">In-place Upgrades</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Configuring and upgrading Istio with gateways.\" href=\"/latest/docs/setup/upgrade/gateways/\">Managing Gateways with Multiple Revisions [experimental]</a></li></ul></li><li role=\"treeitem\" aria-label=\"More Guides\"><button aria-hidden=\"true\"></button><a title=\"More information on additional setup tasks.\" href=\"/latest/docs/setup/additional-setup/\">More Guides</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Describes the built-in Istio installation configuration profiles.\" href=\"/latest/docs/setup/additional-setup/config-profiles/\">Installation Configuration Profiles</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Install the Istio sidecar in application pods automatically using the sidecar injector webhook or manually using istioctl CLI.\" href=\"/latest/docs/setup/additional-setup/sidecar-injection/\">Installing the Sidecar</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Install and use Istio with the Istio CNI plugin, allowing operators to deploy services with lower privilege.\" href=\"/latest/docs/setup/additional-setup/cni/\">Install Istio with the Istio CNI plugin</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Install an external control plane and remote cluster.\" href=\"/latest/docs/setup/additional-setup/external-controlplane/\">Install Istio with an External Control Plane</a></li></ul></li></ul></div></div><div class=\"card\"><button class=\"header dynamic\" id=\"card73\" title=\"How to do single specific targeted activities with the Istio system.\" aria-controls=\"card73-body\"><svg class=\"icon tasks\"><use xlink:href=\"/latest/img/icons.svg#tasks\"></use></svg>Tasks</button><div class=\"body default\" aria-labelledby=\"card73\" role=\"region\" id=\"card73-body\"><ul role=\"tree\" aria-expanded=\"true\" aria-labelledby=\"card73\"><li role=\"treeitem\" aria-label=\"Traffic Management\"><button class=\"show\" aria-hidden=\"true\"></button><a title=\"Tasks that demonstrate Istio's traffic routing features.\" href=\"/latest/docs/tasks/traffic-management/\">Traffic Management</a><ul role=\"group\" aria-expanded=\"true\"><li role=\"none\"><a role=\"treeitem\" title=\"This task shows you how to configure dynamic request routing to multiple versions of a microservice.\" href=\"/latest/docs/tasks/traffic-management/request-routing/\">Request Routing</a></li><li role=\"none\"><a role=\"treeitem\" title=\"This task shows you how to inject faults to test the resiliency of your application.\" href=\"/latest/docs/tasks/traffic-management/fault-injection/\">Fault Injection</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Shows you how to migrate traffic from an old to new version of a service.\" href=\"/latest/docs/tasks/traffic-management/traffic-shifting/\">Traffic Shifting</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Shows you how to migrate TCP traffic from an old to new version of a TCP service.\" href=\"/latest/docs/tasks/traffic-management/tcp-traffic-shifting/\">TCP Traffic Shifting</a></li><li role=\"none\"><a role=\"treeitem\" title=\"This task shows you how to setup request timeouts in Envoy using Istio.\" href=\"/latest/docs/tasks/traffic-management/request-timeouts/\">Request Timeouts</a></li><li role=\"none\"><a role=\"treeitem\" title=\"This task shows you how to configure circuit breaking for connections, requests, and outlier detection.\" href=\"/latest/docs/tasks/traffic-management/circuit-breaking/\">Circuit Breaking</a></li><li role=\"none\"><a role=\"treeitem\" title=\"This task demonstrates the traffic mirroring/shadowing capabilities of Istio.\" href=\"/latest/docs/tasks/traffic-management/mirroring/\">Mirroring</a></li><li role=\"treeitem\" aria-label=\"Ingress\"><button class=\"show\" aria-hidden=\"true\"></button><a title=\"Controlling ingress traffic for an Istio service mesh.\" href=\"/latest/docs/tasks/traffic-management/ingress/\">Ingress</a><ul role=\"group\" aria-expanded=\"true\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Describes how to configure an Istio gateway to expose a service outside of the service mesh.\" href=\"/latest/docs/tasks/traffic-management/ingress/ingress-control/\">Ingress Gateways</a></li><li role=\"none\"><span role=\"treeitem\" class=\"current\" title=\"Expose a service outside of the service mesh over TLS or mTLS.\">Secure Gateways</span></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes how to configure SNI passthrough for an ingress gateway.\" href=\"/latest/docs/tasks/traffic-management/ingress/ingress-sni-passthrough/\">Ingress Gateway without TLS Termination</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes how to configure a Kubernetes Ingress object to expose a service outside of the service mesh.\" href=\"/latest/docs/tasks/traffic-management/ingress/kubernetes-ingress/\">Kubernetes Ingress</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes how to configure the Kubernetes Service APIs with Istio.\" href=\"/latest/docs/tasks/traffic-management/ingress/service-apis/\">Kubernetes Service APIs [Experimental]</a></li></ul></li><li role=\"treeitem\" aria-label=\"Egress\"><button aria-hidden=\"true\"></button><a title=\"Controlling egress traffic for an Istio service mesh.\" href=\"/latest/docs/tasks/traffic-management/egress/\">Egress</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Describes how to configure Istio to route traffic from services in the mesh to external services.\" href=\"/latest/docs/tasks/traffic-management/egress/egress-control/\">Accessing External Services</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes how to configure Istio to perform TLS origination for traffic to external services.\" href=\"/latest/docs/tasks/traffic-management/egress/egress-tls-origination/\">Egress TLS Origination</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes how to configure Istio to direct traffic to external services through a dedicated gateway.\" href=\"/latest/docs/tasks/traffic-management/egress/egress-gateway/\">Egress Gateways</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes how to configure an Egress Gateway to perform TLS origination to external services using Secret Discovery Service.\" href=\"/latest/docs/tasks/traffic-management/egress/egress-gateway-tls-origination-sds/\">Egress Gateways with TLS Origination (SDS)</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes how to configure an Egress Gateway to perform TLS origination to external services using file mount certificates.\" href=\"/latest/docs/tasks/traffic-management/egress/egress-gateway-tls-origination/\">Egress Gateways with TLS Origination (File Mount)</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes how to enable egress traffic for a set of hosts in a common domain, instead of configuring each and every host separately.\" href=\"/latest/docs/tasks/traffic-management/egress/wildcard-egress-hosts/\">Egress using Wildcard Hosts</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Shows how to configure Istio for Kubernetes External Services.\" href=\"/latest/docs/tasks/traffic-management/egress/egress-kubernetes-services/\">Kubernetes Services for Egress Traffic</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes how to configure Istio to let applications use an external HTTPS proxy.\" href=\"/latest/docs/tasks/traffic-management/egress/http-proxy/\">Using an External HTTPS Proxy</a></li></ul></li></ul></li><li role=\"treeitem\" aria-label=\"Security\"><button aria-hidden=\"true\"></button><a title=\"Demonstrates how to secure the mesh.\" href=\"/latest/docs/tasks/security/\">Security</a><ul role=\"group\" aria-expanded=\"false\"><li role=\"treeitem\" aria-label=\"Certificate Management\"><button aria-hidden=\"true\"></button><a title=\"Management of the certificates in Istio.\" href=\"/latest/docs/tasks/security/cert-management/\">Certificate Management</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Shows how system administrators can configure Istio's CA with a root certificate, signing certificate and key.\" href=\"/latest/docs/tasks/security/cert-management/plugin-ca-cert/\">Plug in CA Certificates</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Shows how to provision and manage DNS certificates in Istio.\" href=\"/latest/docs/tasks/security/cert-management/dns-cert/\">Istio DNS Certificate Management</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Shows how to use a Custom Certificate Authority (that integrates with the Kubernetes CSR API) to provision Istio workload certificates.\" href=\"/latest/docs/tasks/security/cert-management/custom-ca-k8s/\">Custom CA Integration using Kubernetes CSR [experimental]</a></li></ul></li><li role=\"treeitem\" aria-label=\"Authentication\"><button aria-hidden=\"true\"></button><a title=\"Controlling mutual TLS and end-user authentication for mesh services.\" href=\"/latest/docs/tasks/security/authentication/\">Authentication</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Shows you how to use Istio authentication policy to setup mutual TLS and basic end-user authentication.\" href=\"/latest/docs/tasks/security/authentication/authn-policy/\">Authentication Policy</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Shows you how to incrementally migrate your Istio services to mutual TLS.\" href=\"/latest/docs/tasks/security/authentication/mtls-migration/\">Mutual TLS Migration</a></li></ul></li><li role=\"treeitem\" aria-label=\"Authorization\"><button aria-hidden=\"true\"></button><a title=\"Shows how to control access to Istio services.\" href=\"/latest/docs/tasks/security/authorization/\">Authorization</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Shows how to set up access control for HTTP traffic.\" href=\"/latest/docs/tasks/security/authorization/authz-http/\">Authorization for HTTP traffic</a></li><li role=\"none\"><a role=\"treeitem\" title=\"How to set up access control for TCP traffic.\" href=\"/latest/docs/tasks/security/authorization/authz-tcp/\">Authorization for TCP traffic</a></li><li role=\"none\"><a role=\"treeitem\" title=\"How to set up access control with JWT in Istio.\" href=\"/latest/docs/tasks/security/authorization/authz-jwt/\">Authorization with JWT</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Shows how to set up access control to deny traffic explicitly.\" href=\"/latest/docs/tasks/security/authorization/authz-deny/\">Authorization policies with a deny action</a></li><li role=\"none\"><a role=\"treeitem\" title=\"How to set up access control on an ingress gateway.\" href=\"/latest/docs/tasks/security/authorization/authz-ingress/\">Authorization on Ingress Gateway</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Shows how to migrate from one trust domain to another without changing authorization policy.\" href=\"/latest/docs/tasks/security/authorization/authz-td-migration/\">Authorization Policy Trust Domain Migration</a></li></ul></li></ul></li><li role=\"treeitem\" aria-label=\"Observability\"><button aria-hidden=\"true\"></button><a title=\"Demonstrates how to collect telemetry information from the mesh.\" href=\"/latest/docs/tasks/observability/\">Observability</a><ul role=\"group\" aria-expanded=\"false\"><li role=\"treeitem\" aria-label=\"Metrics\"><button aria-hidden=\"true\"></button><a title=\"Demonstrates the collection and querying of metrics within Istio.\" href=\"/latest/docs/tasks/observability/metrics/\">Metrics</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"This task shows you how to configure Istio to collect metrics for TCP services.\" href=\"/latest/docs/tasks/observability/metrics/tcp-metrics/\">Collecting Metrics for TCP Services</a></li><li role=\"none\"><a role=\"treeitem\" title=\"This task shows you how to customize the Istio metrics.\" href=\"/latest/docs/tasks/observability/metrics/customize-metrics/\">Customizing Istio Metrics</a></li><li role=\"none\"><a role=\"treeitem\" title=\"This task shows you how to improve telemetry by grouping requests and responses by their type.\" href=\"/latest/docs/tasks/observability/metrics/classify-metrics/\">Classifying Metrics Based on Request or Response (Experimental)</a></li><li role=\"none\"><a role=\"treeitem\" title=\"This task shows you how to query for Istio Metrics using Prometheus.\" href=\"/latest/docs/tasks/observability/metrics/querying-metrics/\">Querying Metrics from Prometheus</a></li><li role=\"none\"><a role=\"treeitem\" title=\"This task shows you how to setup and use the Istio Dashboard to monitor mesh traffic.\" href=\"/latest/docs/tasks/observability/metrics/using-istio-dashboard/\">Visualizing Metrics with Grafana</a></li></ul></li><li role=\"treeitem\" aria-label=\"Logs\"><button aria-hidden=\"true\"></button><a title=\"Demonstrates the collection of logs within Istio.\" href=\"/latest/docs/tasks/observability/logs/\">Logs</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"This task shows you how to configure Envoy proxies to print access logs to their standard output.\" href=\"/latest/docs/tasks/observability/logs/access-log/\">Getting Envoy's Access Logs</a></li></ul></li><li role=\"treeitem\" aria-label=\"Distributed Tracing\"><button aria-hidden=\"true\"></button><a title=\"This task shows you how to configure Istio-enabled applications to collect trace spans.\" href=\"/latest/docs/tasks/observability/distributed-tracing/\">Distributed Tracing</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Overview of distributed tracing in Istio.\" href=\"/latest/docs/tasks/observability/distributed-tracing/overview/\">Overview</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Learn how to configure the proxies to send tracing requests to Zipkin.\" href=\"/latest/docs/tasks/observability/distributed-tracing/zipkin/\">Zipkin</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Learn how to configure the proxies to send tracing requests to Jaeger.\" href=\"/latest/docs/tasks/observability/distributed-tracing/jaeger/\">Jaeger</a></li><li role=\"none\"><a role=\"treeitem\" title=\"How to configure the proxies to send tracing requests to Lightstep.\" href=\"/latest/docs/tasks/observability/distributed-tracing/lightstep/\">Lightstep</a></li><li role=\"none\"><a role=\"treeitem\" title=\"How to configure tracing options (beta/development).\" href=\"/latest/docs/tasks/observability/distributed-tracing/configurability/\">Configurability (Beta/Development)</a></li></ul></li><li role=\"none\"><a role=\"treeitem\" title=\"This task shows you how to visualize your services within an Istio mesh.\" href=\"/latest/docs/tasks/observability/kiali/\">Visualizing Your Mesh</a></li><li role=\"none\"><a role=\"treeitem\" title=\"This task shows you how to configure external access to the set of Istio telemetry addons.\" href=\"/latest/docs/tasks/observability/gateways/\">Remotely Accessing Telemetry Addons</a></li></ul></li></ul></div></div><div class=\"card\"><button class=\"header dynamic\" id=\"card94\" title=\"A variety of fully working example uses for Istio that you can experiment with.\" aria-controls=\"card94-body\"><svg class=\"icon examples\"><use xlink:href=\"/latest/img/icons.svg#examples\"></use></svg>Examples</button><div class=\"body\" aria-labelledby=\"card94\" role=\"region\" id=\"card94-body\"><ul role=\"tree\" aria-expanded=\"true\" aria-labelledby=\"card94\"><li role=\"none\"><a role=\"treeitem\" title=\"Deploys a sample application composed of four separate microservices used to demonstrate various Istio features.\" href=\"/latest/docs/examples/bookinfo/\">Bookinfo Application</a></li><li role=\"treeitem\" aria-label=\"Virtual Machines\"><button aria-hidden=\"true\"></button><a title=\"Examples that add workloads running on virtual machines to an Istio mesh.\" href=\"/latest/docs/examples/virtual-machines/\">Virtual Machines</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Learn how to add a service running on a virtual machine to your single-network Istio mesh.\" href=\"/latest/docs/examples/virtual-machines/single-network/\">Example Application using Virtual Machines in a Single Network Mesh</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Learn how to add a service running on a virtual machine to your multi-network Istio mesh.\" href=\"/latest/docs/examples/virtual-machines/multi-network/\">Virtual Machines in Multi-Network Meshes</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Run the Bookinfo application with a MySQL service running on a virtual machine within your mesh.\" href=\"/latest/docs/examples/virtual-machines/bookinfo/\">Bookinfo with a Virtual Machine</a></li></ul></li><li role=\"treeitem\" aria-label=\"Learn Microservices using Kubernetes and Istio\"><button aria-hidden=\"true\"></button><a title=\"This modular tutorial provides new users with hands-on experience using Istio for common microservices scenarios, one step at a time.\" href=\"/latest/docs/examples/microservices-istio/\">Learn Microservices using Kubernetes and Istio</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/examples/microservices-istio/prereq/\">Prerequisites</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/examples/microservices-istio/setup-kubernetes-cluster/\">Setup a Kubernetes Cluster</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/examples/microservices-istio/setup-local-computer/\">Setup a Local Computer</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/examples/microservices-istio/single/\">Run a Microservice Locally</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/examples/microservices-istio/package-service/\">Run ratings in Docker</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/examples/microservices-istio/bookinfo-kubernetes/\">Run Bookinfo with Kubernetes</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/examples/microservices-istio/production-testing/\">Test in production</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/examples/microservices-istio/add-new-microservice-version/\">Add a new version of reviews</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/examples/microservices-istio/add-istio/\">Enable Istio on productpage</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/examples/microservices-istio/enable-istio-all-microservices/\">Enable Istio on all the microservices</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/examples/microservices-istio/istio-ingress-gateway/\">Configure Istio Ingress Gateway</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/examples/microservices-istio/logs-istio/\">Monitoring with Istio</a></li></ul></li></ul></div></div><div class=\"card\"><button class=\"header dynamic\" id=\"card118\" title=\"Concepts, tools, and techniques to deploy and manage an Istio mesh.\" aria-controls=\"card118-body\"><svg class=\"icon guide\"><use xlink:href=\"/latest/img/icons.svg#guide\"></use></svg>Operations</button><div class=\"body\" aria-labelledby=\"card118\" role=\"region\" id=\"card118-body\"><ul role=\"tree\" aria-expanded=\"true\" aria-labelledby=\"card118\"><li role=\"treeitem\" aria-label=\"Deployment\"><button aria-hidden=\"true\"></button><a title=\"Requirements, concepts, and considerations for setting up an Istio deployment.\" href=\"/latest/docs/ops/deployment/\">Deployment</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Describes Istio's high-level architecture and design goals.\" href=\"/latest/docs/ops/deployment/architecture/\">Architecture</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes the options and considerations when configuring your Istio deployment.\" href=\"/latest/docs/ops/deployment/deployment-models/\">Deployment Models</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Istio performance and scalability summary.\" href=\"/latest/docs/ops/deployment/performance-and-scalability/\">Performance and Scalability</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Requirements of applications deployed in an Istio-enabled cluster.\" href=\"/latest/docs/ops/deployment/requirements/\">Application Requirements</a></li></ul></li><li role=\"treeitem\" aria-label=\"Configuration\"><button aria-hidden=\"true\"></button><a title=\"Advanced concepts and features for configuring a running Istio mesh.\" href=\"/latest/docs/ops/configuration/\">Configuration</a><ul role=\"group\" aria-expanded=\"false\"><li role=\"treeitem\" aria-label=\"Mesh Configuration\"><button aria-hidden=\"true\"></button><a title=\"Helps you manage the global mesh configuration.\" href=\"/latest/docs/ops/configuration/mesh/\">Mesh Configuration</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Provides a general overview of Istio's use of Kubernetes webhooks and the related issues that can arise.\" href=\"/latest/docs/ops/configuration/mesh/webhook/\">Dynamic Admission Webhooks Overview</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes how to wait to apply mesh configuration until a resource reaches a given status or readiness.\" href=\"/latest/docs/ops/configuration/mesh/config-resource-ready/\">Wait for Resource Status to Apply Configuration</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes Istio's use of Kubernetes webhooks for automatic sidecar injection.\" href=\"/latest/docs/ops/configuration/mesh/injection-concepts/\">Automatic Sidecar Injection</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Shows how to do health checking for Istio services.\" href=\"/latest/docs/ops/configuration/mesh/app-health-check/\">Health Checking of Istio Services</a></li></ul></li><li role=\"treeitem\" aria-label=\"Traffic Management\"><button aria-hidden=\"true\"></button><a title=\"Helps you manage the networking aspects of a running mesh.\" href=\"/latest/docs/ops/configuration/traffic-management/\">Traffic Management</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Information on how to specify protocols.\" href=\"/latest/docs/ops/configuration/traffic-management/protocol-selection/\">Protocol Selection</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Information on how to enable and understand Locality Load Balancing.\" href=\"/latest/docs/ops/configuration/traffic-management/locality-load-balancing/\">Locality Load Balancing</a></li><li role=\"none\"><a role=\"treeitem\" title=\"How to configure TLS settings to secure network traffic.\" href=\"/latest/docs/ops/configuration/traffic-management/tls-configuration/\">TLS Configuration</a></li><li role=\"none\"><a role=\"treeitem\" title=\"How to configure gateway network topology.\" href=\"/latest/docs/ops/configuration/traffic-management/network-topologies/\">Configuring Gateway Network Topology [experimental]</a></li></ul></li><li role=\"treeitem\" aria-label=\"Security\"><button aria-hidden=\"true\"></button><a title=\"Helps you manage the security aspects of a running mesh.\" href=\"/latest/docs/ops/configuration/security/\">Security</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Use hardened container images to reduce Istio's attack surface.\" href=\"/latest/docs/ops/configuration/security/harden-docker-images/\">Harden Docker Container Images</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Learn how to extend the lifetime of the Istio self-signed root certificate.\" href=\"/latest/docs/ops/configuration/security/root-transition/\">Extending Self-Signed Certificate Lifetime</a></li></ul></li><li role=\"treeitem\" aria-label=\"Observability\"><button aria-hidden=\"true\"></button><a title=\"Helps you manage telemetry collection and visualization in a running mesh.\" href=\"/latest/docs/ops/configuration/telemetry/\">Observability</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Fine-grained control of Envoy statistics.\" href=\"/latest/docs/ops/configuration/telemetry/envoy-stats/\">Envoy Statistics</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Configure Prometheus to monitor multicluster Istio.\" href=\"/latest/docs/ops/configuration/telemetry/monitoring-multicluster-prometheus/\">Monitoring Multicluster Istio with Prometheus</a></li></ul></li></ul></li><li role=\"treeitem\" aria-label=\"Best Practices\"><button aria-hidden=\"true\"></button><a title=\"Best practices for setting up and managing an Istio service mesh.\" href=\"/latest/docs/ops/best-practices/\">Best Practices</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"General best practices when setting up an Istio service mesh.\" href=\"/latest/docs/ops/best-practices/deployment/\">Deployment Best Practices</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Configuration best practices to avoid networking or traffic management issues.\" href=\"/latest/docs/ops/best-practices/traffic-management/\">Traffic Management Best Practices</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Best practices for securing applications using Istio.\" href=\"/latest/docs/ops/best-practices/security/\">Security Best Practices</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Best practices for observing applications using Istio.\" href=\"/latest/docs/ops/best-practices/observability/\">Observability Best Practices</a></li></ul></li><li role=\"treeitem\" aria-label=\"Common Problems\"><button aria-hidden=\"true\"></button><a title=\"Describes how to identify and resolve common problems in Istio.\" href=\"/latest/docs/ops/common-problems/\">Common Problems</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Techniques to address common Istio traffic management and network problems.\" href=\"/latest/docs/ops/common-problems/network-issues/\">Traffic Management Problems</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Techniques to address common Istio authentication, authorization, and general security-related problems.\" href=\"/latest/docs/ops/common-problems/security-issues/\">Security Problems</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Dealing with telemetry collection issues.\" href=\"/latest/docs/ops/common-problems/observability-issues/\">Observability Problems</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Resolve common problems with Istio's use of Kubernetes webhooks for automatic sidecar injection.\" href=\"/latest/docs/ops/common-problems/injection/\">Sidecar Injection Problems</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes how to resolve configuration validation problems.\" href=\"/latest/docs/ops/common-problems/validation/\">Configuration Validation Problems</a></li></ul></li><li role=\"treeitem\" aria-label=\"Diagnostic Tools\"><button aria-hidden=\"true\"></button><a title=\"Tools and techniques to help troubleshoot an Istio mesh.\" href=\"/latest/docs/ops/diagnostic-tools/\">Diagnostic Tools</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Istio includes a supplemental tool that provides debugging and diagnosis for Istio service mesh deployments.\" href=\"/latest/docs/ops/diagnostic-tools/istioctl/\">Using the Istioctl Command-line Tool</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes tools and techniques to diagnose Envoy configuration issues related to traffic management.\" href=\"/latest/docs/ops/diagnostic-tools/proxy-cmd/\">Debugging Envoy and Istiod</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Shows you how to use istioctl describe to verify the configurations of a pod in your mesh.\" href=\"/latest/docs/ops/diagnostic-tools/istioctl-describe/\">Understand your Mesh with Istioctl Describe</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Shows you how to use istioctl analyze to identify potential issues with your configuration.\" href=\"/latest/docs/ops/diagnostic-tools/istioctl-analyze/\">Diagnose your Configuration with Istioctl Analyze</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes how to use ControlZ to get insight into a running istiod component.\" href=\"/latest/docs/ops/diagnostic-tools/controlz/\">Istiod Introspection</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes how to use component-level logging to get insights into a running component's behavior.\" href=\"/latest/docs/ops/diagnostic-tools/component-logging/\">Component Logging</a></li></ul></li><li role=\"treeitem\" aria-label=\"Integrations\"><button aria-hidden=\"true\"></button><a title=\"Other softwares that Istio can integrate with to provide additional functionality.\" href=\"/latest/docs/ops/integrations/\">Integrations</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Information on how to integrate with cert-manager.\" href=\"/latest/docs/ops/integrations/certmanager/\">cert-manager</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Information on how to integrate with Grafana to set up Istio dashboards.\" href=\"/latest/docs/ops/integrations/grafana/\">Grafana</a></li><li role=\"none\"><a role=\"treeitem\" title=\"How to integrate with Jaeger.\" href=\"/latest/docs/ops/integrations/jaeger/\">Jaeger</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Information on how to integrate with Kiali.\" href=\"/latest/docs/ops/integrations/kiali/\">Kiali</a></li><li role=\"none\"><a role=\"treeitem\" title=\"How to integrate with Prometheus.\" href=\"/latest/docs/ops/integrations/prometheus/\">Prometheus</a></li><li role=\"none\"><a role=\"treeitem\" title=\"How to integrate with Zipkin.\" href=\"/latest/docs/ops/integrations/zipkin/\">Zipkin</a></li></ul></li></ul></div></div><div class=\"card\"><button class=\"header dynamic\" id=\"card169\" title=\"Detailed authoritative reference material such as command-line options, configuration options, and API calling parameters.\" aria-controls=\"card169-body\"><svg class=\"icon reference\"><use xlink:href=\"/latest/img/icons.svg#reference\"></use></svg>Reference</button><div class=\"body\" aria-labelledby=\"card169\" role=\"region\" id=\"card169-body\"><ul role=\"tree\" aria-expanded=\"true\" aria-labelledby=\"card169\"><li role=\"treeitem\" aria-label=\"Configuration\"><button aria-hidden=\"true\"></button><a title=\"Detailed information on configuration options.\" href=\"/latest/docs/reference/config/\">Configuration</a><ul role=\"group\" aria-expanded=\"false\"><li role=\"none\"><a role=\"treeitem\" title=\"Configuration affecting Istio control plane installation version and shape.\" href=\"/latest/docs/reference/config/istio.operator.v1alpha1/\">IstioOperator Options</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Configuration affecting the service mesh as a whole.\" href=\"/latest/docs/reference/config/istio.mesh.v1alpha1/\">Global Mesh Options</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes the structure of messages generated by Istio analyzers.\" href=\"/latest/docs/reference/config/istio.analysis.v1alpha1/\">Analysis Messages</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes the role of the `status` field in configuration workflow.\" href=\"/latest/docs/reference/config/config-status/\">Configuration Status Field</a></li><li role=\"treeitem\" aria-label=\"Proxy Extensions\"><button aria-hidden=\"true\"></button><a title=\"Describes how to configure Istio proxy extensions.\" href=\"/latest/docs/reference/config/proxy_extensions/\">Proxy Extensions</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Configuration for Metadata Exchange Filter.\" href=\"/latest/docs/reference/config/proxy_extensions/metadata_exchange/\">Metadata Exchange Config</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Configuration for Stackdriver filter.\" href=\"/latest/docs/reference/config/proxy_extensions/stackdriver/\">Stackdriver Config</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Configuration for Attribute Generation plugin.\" href=\"/latest/docs/reference/config/proxy_extensions/attributegen/\">AttributeGen Config</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Configuration for AccessLogPolicy Filter.\" href=\"/latest/docs/reference/config/proxy_extensions/accesslogpolicy/\">AccessLogPolicy Config</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Configuration for Stats Filter.\" href=\"/latest/docs/reference/config/proxy_extensions/stats/\">Stats Config</a></li><li role=\"none\"><a role=\"treeitem\" title=\"How to enable telemetry generation with the Wasm runtime (experimental).\" href=\"/latest/docs/reference/config/proxy_extensions/wasm_telemetry/\">Wasm-based Telemetry (Experimental)</a></li></ul></li><li role=\"treeitem\" aria-label=\"Traffic Management\"><button aria-hidden=\"true\"></button><a title=\"Describes how to configure HTTP/TCP routing features.\" href=\"/latest/docs/reference/config/networking/\">Traffic Management</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Configuration affecting load balancing, outlier detection, etc.\" href=\"/latest/docs/reference/config/networking/destination-rule/\">Destination Rule</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Customizing Envoy configuration generated by Istio.\" href=\"/latest/docs/reference/config/networking/envoy-filter/\">Envoy Filter</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Configuration affecting edge load balancer.\" href=\"/latest/docs/reference/config/networking/gateway/\">Gateway</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Configuration affecting service registry.\" href=\"/latest/docs/reference/config/networking/service-entry/\">Service Entry</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Configuration affecting network reachability of a sidecar.\" href=\"/latest/docs/reference/config/networking/sidecar/\">Sidecar</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes a collection of workload instances.\" href=\"/latest/docs/reference/config/networking/workload-group/\">Workload Group</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Configuration affecting VMs onboarded into the mesh.\" href=\"/latest/docs/reference/config/networking/workload-entry/\">Workload Entry</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Configuration affecting label/content routing, sni routing, etc.\" href=\"/latest/docs/reference/config/networking/virtual-service/\">Virtual Service</a></li></ul></li><li role=\"treeitem\" aria-label=\"Security\"><button aria-hidden=\"true\"></button><a title=\"Describes how to configure Istio's security features.\" href=\"/latest/docs/reference/config/security/\">Security</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Configuration to validate JWT.\" href=\"/latest/docs/reference/config/security/jwt/\">JWTRule</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Peer authentication configuration for workloads.\" href=\"/latest/docs/reference/config/security/peer_authentication/\">PeerAuthentication</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Request authentication configuration for workloads.\" href=\"/latest/docs/reference/config/security/request_authentication/\">RequestAuthentication</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Configuration for access control on workloads.\" href=\"/latest/docs/reference/config/security/authorization-policy/\">Authorization Policy</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Describes the supported conditions in authorization policies.\" href=\"/latest/docs/reference/config/security/conditions/\">Authorization Policy Conditions</a></li></ul></li><li role=\"treeitem\" aria-label=\"Common Types\"><button aria-hidden=\"true\"></button><a title=\"Describes common types in Istio API.\" href=\"/latest/docs/reference/config/type/\">Common Types</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Definition of a workload selector.\" href=\"/latest/docs/reference/config/type/workload-selector/\">Workload Selector</a></li></ul></li><li role=\"none\"><a role=\"treeitem\" title=\"Istio standard metrics exported by Istio telemetry.\" href=\"/latest/docs/reference/config/metrics/\">Istio Standard Metrics</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Resource annotations used by Istio.\" href=\"/latest/docs/reference/config/annotations/\">Resource Annotations</a></li><li role=\"treeitem\" aria-label=\"Configuration Analysis Messages\"><button aria-hidden=\"true\"></button><a title=\"Documents the individual error and warning messages produced during configuration analysis.\" href=\"/latest/docs/reference/config/analysis/\">Configuration Analysis Messages</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0113/\">MTLSPolicyConflict</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0109/\">ConflictingMeshGatewayVirtualServiceHosts</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0110/\">ConflictingSidecarWorkloadSelectors</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0116/\">DeploymentAssociatedToMultipleServices</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0117/\">DeploymentRequiresServiceAssociated</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0002/\">Deprecated</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0104/\">GatewayPortNotOnWorkload</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0001/\">InternalError</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0125/\">InvalidAnnotation</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0122/\">InvalidRegexp</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0105/\">IstioProxyImageMismatch</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0119/\">JwtFailureDueToInvalidServicePortPrefix</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0107/\">MisplacedAnnotation</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0108/\">UnknownAnnotation</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0111/\">MultipleSidecarsWithoutWorkloadSelectors</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0123/\">NamespaceMultipleInjectionLabels</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0102/\">NamespaceNotInjected</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0127/\">NoMatchingWorkloadsFound</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0128/\">NoServerCertificateVerificationDestinationLevel</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0129/\">NoServerCertificateVerificationPortLevel</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/message-format/\">Analyzer Message Format</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0131/\">VirtualServiceIneffectiveMatch</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0118/\">PortNameIsNotUnderNamingConvention</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0101/\">ReferencedResourceNotFound</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0106/\">SchemaValidationError</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0130/\">VirtualServiceUnreachableRule</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0103/\">PodMissingProxy</a></li><li role=\"none\"><a role=\"treeitem\" href=\"/latest/docs/reference/config/analysis/ist0112/\">VirtualServiceDestinationPortSelectorRequired</a></li></ul></li></ul></li><li role=\"treeitem\" aria-label=\"Commands\"><button aria-hidden=\"true\"></button><a title=\"Describes usage and options of the Istio commands and utilities.\" href=\"/latest/docs/reference/commands/\">Commands</a><ul role=\"group\" aria-expanded=\"false\" class=\"leaf-section\"><li role=\"none\"><a role=\"treeitem\" title=\"Istio control interface.\" href=\"/latest/docs/reference/commands/istioctl/\">istioctl</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Istio Pilot.\" href=\"/latest/docs/reference/commands/pilot-discovery/\">pilot-discovery</a></li><li role=\"none\"><a role=\"treeitem\" title=\"The Istio operator.\" href=\"/latest/docs/reference/commands/operator/\">operator</a></li><li role=\"none\"><a role=\"treeitem\" title=\"Istio Pilot agent.\" href=\"/latest/docs/reference/commands/pilot-agent/\">pilot-agent</a></li></ul></li><li role=\"none\"><a role=\"treeitem\" title=\"A glossary of common Istio terms.\" href=\"/latest/docs/reference/glossary/\">Glossary</a></li></ul></div></div></div></nav></div><div class=\"article-container\"><button tabindex=\"-1\" id=\"sidebar-toggler\" title=\"Toggle the navigation bar\"><svg class=\"icon pull\"><use xlink:href=\"/latest/img/icons.svg#pull\"></use></svg></button><nav aria-label=\"Breadcrumb\"><ol><li><a href=\"/latest/\" title=\"Connect, secure, control, and observe services.\">Istio</a></li><li><a href=\"/latest/docs/\" title=\"Learn how to deploy, use, and operate Istio.\">Docs</a></li><li><a href=\"/latest/docs/tasks/\" title=\"How to do single specific targeted activities with the Istio system.\">Tasks</a></li><li><a href=\"/latest/docs/tasks/traffic-management/\" title=\"Tasks that demonstrate Istio's traffic routing features.\">Traffic Management</a></li><li><a href=\"/latest/docs/tasks/traffic-management/ingress/\" title=\"Controlling ingress traffic for an Istio service mesh.\">Ingress</a></li><li>Secure Gateways</li></ol></nav><article aria-labelledby=\"title\"><div class=\"title-area\"><div style=\"width:100%\"><h1 id=\"title\">Secure Gateways</h1><p class=\"byline\"><span title=\"1795 words\"><svg class=\"icon clock\"><use xlink:href=\"/latest/img/icons.svg#clock\"></use></svg><span>&nbsp;</span>9 minute read</span>\n<span>&nbsp;</span>\n<span><a href=\"https://github.com/istio/istio.io/tree/master/README.md#testing-document-content\" title=\"An automated test is available for this page. Click for details.\"><svg class=\"icon checkmark\"><use xlink:href=\"/latest/img/icons.svg#checkmark\"></use></svg><span>&nbsp;</span>\npage test</a></span></p></div></div><nav class=\"toc-inlined\" aria-label=\"Table of Contents\"><div><hr><ol><li role=\"none\" aria-label=\"Before you begin\"><a href=\"#before-you-begin\">Before you begin</a></li><li role=\"none\" aria-label=\"Generate client and server certificates and keys\"><a href=\"#generate-client-and-server-certificates-and-keys\">Generate client and server certificates and keys</a><ol><li role=\"none\" aria-label=\"Configure a TLS ingress gateway for a single host\"><a href=\"#configure-a-tls-ingress-gateway-for-a-single-host\">Configure a TLS ingress gateway for a single host</a></li><li role=\"none\" aria-label=\"Configure a TLS ingress gateway for multiple hosts\"><a href=\"#configure-a-tls-ingress-gateway-for-multiple-hosts\">Configure a TLS ingress gateway for multiple hosts</a></li><li role=\"none\" aria-label=\"Configure a mutual TLS ingress gateway\"><a href=\"#configure-a-mutual-tls-ingress-gateway\">Configure a mutual TLS ingress gateway</a></li></ol></li><li role=\"none\" aria-label=\"Troubleshooting\"><a href=\"#troubleshooting\">Troubleshooting</a></li><li role=\"none\" aria-label=\"Cleanup\"><a href=\"#cleanup\">Cleanup</a></li><li role=\"none\" aria-label=\"See also\"><a href=\"#see-also\">See also</a></li></ol><hr></div></nav><p>The <a href=\"/latest/docs/tasks/traffic-management/ingress\">Control Ingress Traffic task</a>\ndescribes how to configure an ingress gateway to expose an HTTP\nservice to external traffic. This task shows how to expose a secure HTTPS\nservice using either simple or mutual TLS.</p><h2 id=\"before-you-begin\">Before you begin</h2><ol><li><p>Perform the steps in the <a href=\"/latest/docs/tasks/traffic-management/ingress/ingress-control#before-you-begin\">Before you begin</a>.\nand <a href=\"/latest/docs/tasks/traffic-management/ingress/ingress-control/#determining-the-ingress-ip-and-ports\">Determining the ingress IP and ports</a>\nsections of the <a href=\"/latest/docs/tasks/traffic-management/ingress/ingress-control\">Control Ingress Traffic</a> task. After performing\nthose steps you should have Istio and the <a href=\"https://github.com/istio/istio/tree/release-1.8/samples/httpbin\">httpbin</a> service deployed,\nand the environment variables <code>INGRESS_HOST</code> and <code>SECURE_INGRESS_PORT</code> set.</p></li><li><p>For macOS users, verify that you use <code>curl</code> compiled with the <a href=\"http://www.libressl.org\">LibreSSL</a> library:</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ curl --version | grep LibreSSL\ncurl 7.54.0 (x86_64-apple-darwin17.0) libcurl/7.54.0 LibreSSL/2.0.20 zlib/1.2.11 nghttp2/1.24.0\n</code></pre><p>If the previous command outputs a version of LibreSSL as shown, your <code>curl</code> command\nshould work correctly with the instructions in this task. Otherwise, try\na different implementation of <code>curl</code>, for example on a Linux machine.</p></li></ol><h2 id=\"generate-client-and-server-certificates-and-keys\">Generate client and server certificates and keys</h2><p>For this task you can use your favorite tool to generate certificates and keys. The commands below use\n<a href=\"https://man.openbsd.org/openssl.1\">openssl</a></p><ol><li><p>Create a root certificate and private key to sign the certificates for your services:</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ openssl req -x509 -sha256 -nodes -days 365 -newkey rsa:2048 -subj '/O=example Inc./CN=example.com' -keyout example.com.key -out example.com.crt\n</code></pre></li><li><p>Create a certificate and a private key for <code>httpbin.example.com</code>:</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ openssl req -out httpbin.example.com.csr -newkey rsa:2048 -nodes -keyout httpbin.example.com.key -subj \"/CN=httpbin.example.com/O=httpbin organization\"\n$ openssl x509 -req -days 365 -CA example.com.crt -CAkey example.com.key -set_serial 0 -in httpbin.example.com.csr -out httpbin.example.com.crt\n</code></pre></li></ol><h3 id=\"configure-a-tls-ingress-gateway-for-a-single-host\">Configure a TLS ingress gateway for a single host</h3><ol><li><p>Ensure you have deployed the <a href=\"https://github.com/istio/istio/tree/release-1.8/samples/httpbin\">httpbin</a> service from <a href=\"/latest/docs/tasks/traffic-management/ingress/ingress-control#before-you-begin\">Before you begin</a>.</p></li><li><p>Create a secret for the ingress gateway:</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ kubectl create -n istio-system secret tls httpbin-credential --key=httpbin.example.com.key --cert=httpbin.example.com.crt\n</code></pre><div><aside class=\"callout warning\"><div class=\"type\"><svg class=\"large-icon\"><use xlink:href=\"/latest/img/icons.svg#callout-warning\"></use></svg></div><div class=\"content\">The secret name <strong>should not</strong> begin with <code>istio</code> or <code>prometheus</code>, and\nthe secret <strong>should not</strong> contain a <code>token</code> field.</div></aside></div></li><li><p>Define a gateway with a <code>servers:</code> section for port 443, and specify values for\n<code>credentialName</code> to be <code>httpbin-credential</code>. The values are the same as the\nsecret’s name. The TLS mode should have the value of <code>SIMPLE</code>.</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ cat &lt;&lt;EOF | kubectl apply -f -\napiVersion: networking.istio.io/v1alpha3\nkind: Gateway\nmetadata:\n  name: mygateway\nspec:\n  selector:\n    istio: ingressgateway # use istio default ingress gateway\n  servers:\n  - port:\n      number: 443\n      name: https\n      protocol: HTTPS\n    tls:\n      mode: SIMPLE\n      credentialName: httpbin-credential # must be the same as secret\n    hosts:\n    - httpbin.example.com\nEOF\n</code></pre></li><li><p>Configure the gateway’s ingress traffic routes. Define the corresponding\nvirtual service.</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ cat &lt;&lt;EOF | kubectl apply -f -\napiVersion: networking.istio.io/v1alpha3\nkind: VirtualService\nmetadata:\n  name: httpbin\nspec:\n  hosts:\n  - \"httpbin.example.com\"\n  gateways:\n  - mygateway\n  http:\n  - match:\n    - uri:\n        prefix: /status\n    - uri:\n        prefix: /delay\n    route:\n    - destination:\n        port:\n          number: 8000\n        host: httpbin\nEOF\n</code></pre></li><li><p>Send an HTTPS request to access the <code>httpbin</code> service through HTTPS:</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ curl -v -HHost:httpbin.example.com --resolve \"httpbin.example.com:$SECURE_INGRESS_PORT:$INGRESS_HOST\" \\\n--cacert example.com.crt \"https://httpbin.example.com:$SECURE_INGRESS_PORT/status/418\"\n</code></pre><p>The <code>httpbin</code> service will return the\n<a href=\"https://tools.ietf.org/html/rfc7168#section-2.3.3\">418 I’m a Teapot</a> code.</p></li><li><p>Delete the gateway’s secret and create a new one to change the ingress\ngateway’s credentials.</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ kubectl -n istio-system delete secret httpbin-credential\n</code></pre><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ mkdir new_certificates\n$ openssl req -x509 -sha256 -nodes -days 365 -newkey rsa:2048 -subj '/O=example Inc./CN=example.com' -keyout new_certificates/example.com.key -out new_certificates/example.com.crt\n$ openssl req -out new_certificates/httpbin.example.com.csr -newkey rsa:2048 -nodes -keyout new_certificates/httpbin.example.com.key -subj \"/CN=httpbin.example.com/O=httpbin organization\"\n$ openssl x509 -req -days 365 -CA new_certificates/example.com.crt -CAkey new_certificates/example.com.key -set_serial 0 -in new_certificates/httpbin.example.com.csr -out new_certificates/httpbin.example.com.crt\n$ kubectl create -n istio-system secret tls httpbin-credential \\\n--key=new_certificates/httpbin.example.com.key \\\n--cert=new_certificates/httpbin.example.com.crt\n</code></pre></li><li><p>Access the <code>httpbin</code> service using <code>curl</code> using the new certificate chain:</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ curl -v -HHost:httpbin.example.com --resolve \"httpbin.example.com:$SECURE_INGRESS_PORT:$INGRESS_HOST\" \\\n--cacert new_certificates/example.com.crt \"https://httpbin.example.com:$SECURE_INGRESS_PORT/status/418\"\n...\nHTTP/2 418\n...\n    -=[ teapot ]=-\n\n       _...._\n     .'  _ _ `.\n    | .\"` ^ `\". _,\n    \\_;`\"---\"`|//\n      |       ;/\n      \\_     _/\n        `\"\"\"`\n</code></pre></li><li><p>If you try to access <code>httpbin</code> with the previous certificate chain, the attempt now fails.</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ curl -v -HHost:httpbin.example.com --resolve \"httpbin.example.com:$SECURE_INGRESS_PORT:$INGRESS_HOST\" \\\n--cacert example.com.crt \"https://httpbin.example.com:$SECURE_INGRESS_PORT/status/418\"\n...\n* TLSv1.2 (OUT), TLS handshake, Client hello (1):\n* TLSv1.2 (IN), TLS handshake, Server hello (2):\n* TLSv1.2 (IN), TLS handshake, Certificate (11):\n* TLSv1.2 (OUT), TLS alert, Server hello (2):\n* curl: (35) error:04FFF06A:rsa routines:CRYPTO_internal:block type is not 01\n</code></pre></li></ol><h3 id=\"configure-a-tls-ingress-gateway-for-multiple-hosts\">Configure a TLS ingress gateway for multiple hosts</h3><p>You can configure an ingress gateway for multiple hosts,\n<code>httpbin.example.com</code> and <code>helloworld-v1.example.com</code>, for example. The ingress gateway\nretrieves unique credentials corresponding to a specific <code>credentialName</code>.</p><ol><li><p>To restore the credentials for <code>httpbin</code>, delete its secret and create it again.</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ kubectl -n istio-system delete secret httpbin-credential\n$ kubectl create -n istio-system secret tls httpbin-credential \\\n--key=httpbin.example.com.key \\\n--cert=httpbin.example.com.crt\n</code></pre></li><li><p>Start the <code>helloworld-v1</code> sample</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ cat &lt;&lt;EOF | kubectl apply -f -\napiVersion: v1\nkind: Service\nmetadata:\n  name: helloworld-v1\n  labels:\n    app: helloworld-v1\nspec:\n  ports:\n  - name: http\n    port: 5000\n  selector:\n    app: helloworld-v1\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: helloworld-v1\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: helloworld-v1\n      version: v1\n  template:\n    metadata:\n      labels:\n        app: helloworld-v1\n        version: v1\n    spec:\n      containers:\n      - name: helloworld\n        image: istio/examples-helloworld-v1\n        resources:\n          requests:\n            cpu: \"100m\"\n        imagePullPolicy: IfNotPresent #Always\n        ports:\n        - containerPort: 5000\nEOF\n</code></pre></li><li><p>Generate a certificate and a private key for <code>helloworld-v1.example.com</code>:</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ openssl req -out helloworld-v1.example.com.csr -newkey rsa:2048 -nodes -keyout helloworld-v1.example.com.key -subj \"/CN=helloworld-v1.example.com/O=helloworld organization\"\n$ openssl x509 -req -days 365 -CA example.com.crt -CAkey example.com.key -set_serial 1 -in helloworld-v1.example.com.csr -out helloworld-v1.example.com.crt\n</code></pre></li><li><p>Create the <code>helloworld-credential</code> secret:</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ kubectl create -n istio-system secret tls helloworld-credential --key=helloworld-v1.example.com.key --cert=helloworld-v1.example.com.crt\n</code></pre></li><li><p>Define a gateway with two server sections for port 443. Set the value of\n<code>credentialName</code> on each port to <code>httpbin-credential</code> and <code>helloworld-credential</code>\nrespectively. Set TLS mode to <code>SIMPLE</code>.</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ cat &lt;&lt;EOF | kubectl apply -f -\napiVersion: networking.istio.io/v1alpha3\nkind: Gateway\nmetadata:\n  name: mygateway\nspec:\n  selector:\n    istio: ingressgateway # use istio default ingress gateway\n  servers:\n  - port:\n      number: 443\n      name: https-httpbin\n      protocol: HTTPS\n    tls:\n      mode: SIMPLE\n      credentialName: httpbin-credential\n    hosts:\n    - httpbin.example.com\n  - port:\n      number: 443\n      name: https-helloworld\n      protocol: HTTPS\n    tls:\n      mode: SIMPLE\n      credentialName: helloworld-credential\n    hosts:\n    - helloworld-v1.example.com\nEOF\n</code></pre></li><li><p>Configure the gateway’s traffic routes. Define the corresponding\nvirtual service.</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ cat &lt;&lt;EOF | kubectl apply -f -\napiVersion: networking.istio.io/v1alpha3\nkind: VirtualService\nmetadata:\n  name: helloworld-v1\nspec:\n  hosts:\n  - helloworld-v1.example.com\n  gateways:\n  - mygateway\n  http:\n  - match:\n    - uri:\n        exact: /hello\n    route:\n    - destination:\n        host: helloworld-v1\n        port:\n          number: 5000\nEOF\n</code></pre></li><li><p>Send an HTTPS request to <code>helloworld-v1.example.com</code>:</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ curl -v -HHost:helloworld-v1.example.com --resolve \"helloworld-v1.example.com:$SECURE_INGRESS_PORT:$INGRESS_HOST\" \\\n--cacert example.com.crt \"https://helloworld-v1.example.com:$SECURE_INGRESS_PORT/hello\"\nHTTP/2 200\n</code></pre></li><li><p>Send an HTTPS request to <code>httpbin.example.com</code> and still get a teapot in return:</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ curl -v -HHost:httpbin.example.com --resolve \"httpbin.example.com:$SECURE_INGRESS_PORT:$INGRESS_HOST\" \\\n--cacert example.com.crt \"https://httpbin.example.com:$SECURE_INGRESS_PORT/status/418\"\n...\n    -=[ teapot ]=-\n\n       _...._\n     .'  _ _ `.\n    | .\"` ^ `\". _,\n    \\_;`\"---\"`|//\n      |       ;/\n      \\_     _/\n        `\"\"\"`\n</code></pre></li></ol><h3 id=\"configure-a-mutual-tls-ingress-gateway\">Configure a mutual TLS ingress gateway</h3><p>You can extend your gateway’s definition to support\n<a href=\"https://en.wikipedia.org/wiki/Mutual_authentication\">mutual TLS</a>. Change\nthe credentials of the ingress gateway by deleting its secret and creating a new one.\nThe server uses the CA certificate to verify\nits clients, and we must use the name <code>cacert</code> to hold the CA certificate.</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ kubectl -n istio-system delete secret httpbin-credential\n$ kubectl create -n istio-system secret generic httpbin-credential --from-file=tls.key=httpbin.example.com.key \\\n--from-file=tls.crt=httpbin.example.com.crt --from-file=ca.crt=example.com.crt\n</code></pre><ol><li><p>Change the gateway’s definition to set the TLS mode to <code>MUTUAL</code>.</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ cat &lt;&lt;EOF | kubectl apply -f -\napiVersion: networking.istio.io/v1alpha3\nkind: Gateway\nmetadata:\n name: mygateway\nspec:\n selector:\n   istio: ingressgateway # use istio default ingress gateway\n servers:\n - port:\n     number: 443\n     name: https\n     protocol: HTTPS\n   tls:\n     mode: MUTUAL\n     credentialName: httpbin-credential # must be the same as secret\n   hosts:\n   - httpbin.example.com\nEOF\n</code></pre></li><li><p>Attempt to send an HTTPS request using the prior approach and see how it fails:</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ curl -v -HHost:httpbin.example.com --resolve \"httpbin.example.com:$SECURE_INGRESS_PORT:$INGRESS_HOST\" \\\n--cacert example.com.crt \"https://httpbin.example.com:$SECURE_INGRESS_PORT/status/418\"\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\n* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):\n* TLSv1.3 (IN), TLS handshake, Request CERT (13):\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\n* TLSv1.3 (IN), TLS handshake, Finished (20):\n* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):\n* TLSv1.3 (OUT), TLS handshake, Certificate (11):\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\n* TLSv1.3 (IN), TLS alert, unknown (628):\n* OpenSSL SSL_read: error:1409445C:SSL routines:ssl3_read_bytes:tlsv13 alert certificate required, errno 0\n</code></pre></li><li><p>Generate client certificate and private key:</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ openssl req -out client.example.com.csr -newkey rsa:2048 -nodes -keyout client.example.com.key -subj \"/CN=client.example.com/O=client organization\"\n$ openssl x509 -req -days 365 -CA example.com.crt -CAkey example.com.key -set_serial 1 -in client.example.com.csr -out client.example.com.crt\n</code></pre></li><li><p>Pass a client certificate and private key to <code>curl</code> and resend the request.\nPass your client’s certificate with the <code>--cert</code> flag and your private key\nwith the <code>--key</code> flag to <code>curl</code>.</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ curl -v -HHost:httpbin.example.com --resolve \"httpbin.example.com:$SECURE_INGRESS_PORT:$INGRESS_HOST\" \\\n--cacert example.com.crt --cert client.example.com.crt --key client.example.com.key \\\n\"https://httpbin.example.com:$SECURE_INGRESS_PORT/status/418\"\n...\n    -=[ teapot ]=-\n\n       _...._\n     .'  _ _ `.\n    | .\"` ^ `\". _,\n    \\_;`\"---\"`|//\n      |       ;/\n      \\_     _/\n        `\"\"\"`\n</code></pre></li></ol><p>Istio supports reading a few different Secret formats, to support integration with various tools such as <a href=\"/latest/docs/ops/integrations/certmanager/\">cert-manager</a>:</p><ul><li>A TLS Secret with keys <code>tls.key</code> and <code>tls.crt</code>, as described above. For mutual TLS, a <code>ca.crt</code> key can be used.</li><li>A generic Secret with keys <code>key</code> and <code>cert</code>. For mutual TLS, a <code>cacert</code> key can be used.</li><li>A generic Secret with keys <code>key</code> and <code>cert</code>. For mutual TLS, a separate generic Secret named <code>&lt;secret&gt;-cacert</code>, with a <code>cacert</code> key. For example, <code>httpbin-credential</code> has <code>key</code> and <code>cert</code>, and <code>httpbin-credential-cacert</code> has <code>cacert</code>.</li></ul><h2 id=\"troubleshooting\">Troubleshooting</h2><ul><li><p>Inspect the values of the <code>INGRESS_HOST</code> and <code>SECURE_INGRESS_PORT</code> environment\nvariables. Make sure they have valid values, according to the output of the\nfollowing commands:</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ kubectl get svc -n istio-system\n$ echo \"INGRESS_HOST=$INGRESS_HOST, SECURE_INGRESS_PORT=$SECURE_INGRESS_PORT\"\n</code></pre></li><li><p>Check the log of the <code>istio-ingressgateway</code> controller for error messages:</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ kubectl logs -n istio-system \"$(kubectl get pod -l istio=ingressgateway \\\n-n istio-system -o jsonpath='{.items[0].metadata.name}')\"\n</code></pre></li><li><p>If using macOS, verify you are using <code>curl</code> compiled with the <a href=\"http://www.libressl.org\">LibreSSL</a>\nlibrary, as described in the <a href=\"#before-you-begin\">Before you begin</a> section.</p></li><li><p>Verify that the secrets are successfully created in the <code>istio-system</code>\nnamespace:</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ kubectl -n istio-system get secrets\n</code></pre><p><code>httpbin-credential</code> and <code>helloworld-credential</code> should show in the secrets\nlist.</p></li><li><p>Check the logs to verify that the ingress gateway agent has pushed the\nkey/certificate pair to the ingress gateway.</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ kubectl logs -n istio-system \"$(kubectl get pod -l istio=ingressgateway \\\n-n istio-system -o jsonpath='{.items[0].metadata.name}')\"\n</code></pre><p>The log should show that the <code>httpbin-credential</code> secret was added. If using mutual\nTLS, then the <code>httpbin-credential-cacert</code> secret should also appear.\nVerify the log shows that the gateway agent receives SDS requests from the\ningress gateway, that the resource’s name is <code>httpbin-credential</code>, and that the ingress gateway\nobtained the key/certificate pair. If using mutual TLS, the log should show\nkey/certificate was sent to the ingress gateway,\nthat the gateway agent received the SDS request with the <code>httpbin-credential-cacert</code>\nresource name, and that the ingress gateway obtained the root certificate.</p></li></ul><h2 id=\"cleanup\">Cleanup</h2><ol><li><p>Delete the gateway configuration, the virtual service definition, and the secrets:</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ kubectl delete gateway mygateway\n$ kubectl delete virtualservice httpbin\n$ kubectl delete --ignore-not-found=true -n istio-system secret httpbin-credential \\\nhelloworld-credential\n$ kubectl delete --ignore-not-found=true virtualservice helloworld-v1\n</code></pre></li><li><p>Delete the certificates and keys:</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ rm -rf example.com.crt example.com.key httpbin.example.com.crt httpbin.example.com.key httpbin.example.com.csr helloworld-v1.example.com.crt helloworld-v1.example.com.key helloworld-v1.example.com.csr client.example.com.crt client.example.com.csr client.example.com.key ./new_certificates\n</code></pre></li><li><p>Shutdown the <code>httpbin</code> and <code>helloworld-v1</code> services:</p><pre><code class=\"language-bash\" data-expandlinks=\"true\" data-repo=\"istio\">$ kubectl delete deployment --ignore-not-found=true httpbin helloworld-v1\n$ kubectl delete service --ignore-not-found=true httpbin helloworld-v1\n</code></pre></li></ol><nav id=\"see-also\"><h2>See also</h2><div class=\"see-also\"><div class=\"entry\"><p class=\"link\"><a data-skipendnotes=\"true\" href=\"/latest/blog/2020/alb-ingress-gateway-iks/\">Direct encrypted traffic from IBM Cloud Kubernetes Service Ingress to Istio Ingress Gateway</a></p><p class=\"desc\">Configure the IBM Cloud Kubernetes Service Application Load Balancer to direct traffic to the Istio Ingress gateway with mutual TLS.</p></div><div class=\"entry\"><p class=\"link\"><a data-skipendnotes=\"true\" href=\"/latest/blog/2019/proxy/\">Istio as a Proxy for External Services</a></p><p class=\"desc\">Configure Istio ingress gateway to act as a proxy for external services.</p></div><div class=\"entry\"><p class=\"link\"><a data-skipendnotes=\"true\" href=\"/latest/blog/2019/custom-ingress-gateway/\">Deploy a Custom Ingress Gateway Using Cert-Manager</a></p><p class=\"desc\">Describes how to deploy a custom ingress gateway using cert-manager manually.</p></div><div class=\"entry\"><p class=\"link\"><a data-skipendnotes=\"true\" href=\"/latest/blog/2018/aws-nlb/\">Configuring Istio Ingress with AWS NLB</a></p><p class=\"desc\">Describes how to configure Istio ingress with a network load balancer on AWS.</p></div><div class=\"entry\"><p class=\"link\"><a data-skipendnotes=\"true\" href=\"/latest/docs/ops/configuration/traffic-management/network-topologies/\">Configuring Gateway Network Topology [experimental]</a></p><p class=\"desc\">How to configure gateway network topology.</p></div><div class=\"entry\"><p class=\"link\"><a data-skipendnotes=\"true\" href=\"/latest/docs/tasks/traffic-management/ingress/ingress-sni-passthrough/\">Ingress Gateway without TLS Termination</a></p><p class=\"desc\">Describes how to configure SNI passthrough for an ingress gateway.</p></div></div></nav></article><nav class=\"pagenav\"><div class=\"left\"><a title=\"Describes how to configure an Istio gateway to expose a service outside of the service mesh.\" href=\"/latest/docs/tasks/traffic-management/ingress/ingress-control/\"><svg class=\"icon left-arrow\"><use xlink:href=\"/latest/img/icons.svg#left-arrow\"></use></svg>Ingress Gateways</a></div><div class=\"right\"><a title=\"Describes how to configure SNI passthrough for an ingress gateway.\" href=\"/latest/docs/tasks/traffic-management/ingress/ingress-sni-passthrough/\">Ingress Gateway without TLS Termination<svg class=\"icon right-arrow\"><use xlink:href=\"/latest/img/icons.svg#right-arrow\"></use></svg></a></div></nav><div id=\"feedback\"><div id=\"feedback-initial\">Was this information useful?<br><button class=\"btn feedback\" onclick=\"sendFeedback('en',1)\">Yes</button>\n<button class=\"btn feedback\" onclick=\"sendFeedback('en',0)\">No</button></div><div id=\"feedback-comment\">Do you have any suggestions for improvement?<br><br><input id=\"feedback-textbox\" type=\"text\" placeholder=\"Help us improve...\" data-lang=\"en\"></div><div id=\"feedback-thankyou\">Thanks for your feedback!</div></div><div id=\"endnotes-container\" aria-hidden=\"true\"><h2>Links</h2><ol id=\"endnotes\"></ol></div></div><div class=\"toc-container\"><nav class=\"toc\" aria-label=\"Table of Contents\"><div id=\"toc\"><ol><li role=\"none\" aria-label=\"Before you begin\"><a href=\"#before-you-begin\">Before you begin</a></li><li role=\"none\" aria-label=\"Generate client and server certificates and keys\"><a href=\"#generate-client-and-server-certificates-and-keys\">Generate client and server certificates and keys</a><ol><li role=\"none\" aria-label=\"Configure a TLS ingress gateway for a single host\"><a href=\"#configure-a-tls-ingress-gateway-for-a-single-host\">Configure a TLS ingress gateway for a single host</a></li><li role=\"none\" aria-label=\"Configure a TLS ingress gateway for multiple hosts\"><a href=\"#configure-a-tls-ingress-gateway-for-multiple-hosts\">Configure a TLS ingress gateway for multiple hosts</a></li><li role=\"none\" aria-label=\"Configure a mutual TLS ingress gateway\"><a href=\"#configure-a-mutual-tls-ingress-gateway\">Configure a mutual TLS ingress gateway</a></li></ol></li><li role=\"none\" aria-label=\"Troubleshooting\"><a href=\"#troubleshooting\">Troubleshooting</a></li><li role=\"none\" aria-label=\"Cleanup\"><a href=\"#cleanup\">Cleanup</a></li><li role=\"none\" aria-label=\"See also\"><a href=\"#see-also\">See also</a></li></ol></div></nav></div></main><footer><div class=\"user-links\"><a class=\"channel\" title=\"Go download Istio 1.8.2 now\" href=\"/latest/docs/setup/getting-started/#download\" aria-label=\"Download Istio\"><span>download</span><svg class=\"icon download\"><use xlink:href=\"/latest/img/icons.svg#download\"></use></svg>\n</a><a class=\"channel\" title=\"Join the Istio discussion board to participate in discussions and get help troubleshooting problems\" href=\"https://discuss.istio.io\" aria-label=\"Istio discussion board\"><span>discuss</span><svg class=\"icon discourse\"><use xlink:href=\"/latest/img/icons.svg#discourse\"></use></svg></a>\n<a class=\"channel\" title=\"Stack Overflow is where you can ask questions and find curated answers on deploying, configuring, and using Istio\" href=\"https://stackoverflow.com/questions/tagged/istio\" aria-label=\"Stack Overflow\"><span>stack overflow</span><svg class=\"icon stackoverflow\"><use xlink:href=\"/latest/img/icons.svg#stackoverflow\"></use></svg></a>\n<a class=\"channel\" title=\"Interactively discuss issues with the Istio community on Slack\" href=\"https://slack.istio.io\" aria-label=\"slack\"><span>slack</span><svg class=\"icon slack\"><use xlink:href=\"/latest/img/icons.svg#slack\"></use></svg></a>\n<a class=\"channel\" title=\"Follow us on Twitter to get the latest news\" href=\"https://twitter.com/IstioMesh\" aria-label=\"Twitter\"><span>twitter</span><svg class=\"icon twitter\"><use xlink:href=\"/latest/img/icons.svg#twitter\"></use></svg></a><div class=\"tag\">for everyone</div></div><div class=\"info\"><p class=\"copyright\">Istio\n1.8.2<br>© 2020 Istio Authors, <a href=\"https://policies.google.com/privacy\">Privacy Policy</a><br>Page last modified: December 3, 2020</p></div><div class=\"dev-links\"><a class=\"channel\" title=\"GitHub is where development takes place on Istio code\" href=\"https://github.com/istio/community\" aria-label=\"GitHub\"><span>github</span><svg class=\"icon github\"><use xlink:href=\"/latest/img/icons.svg#github\"></use></svg></a>\n<a class=\"channel\" title=\"Access our team drive if you'd like to take a look at the Istio technical design documents\" href=\"https://groups.google.com/forum/#!forum/istio-team-drive-access\" aria-label=\"team drive\"><span>drive</span><svg class=\"icon drive\"><use xlink:href=\"/latest/img/icons.svg#drive\"></use></svg></a>\n<a class=\"channel\" title=\"If you'd like to contribute to the Istio project, consider participating in our working groups\" href=\"https://github.com/istio/community/blob/master/WORKING-GROUPS.md\" aria-label=\"working groups\"><span>working groups</span><svg class=\"icon working-groups\"><use xlink:href=\"/latest/img/icons.svg#working-groups\"></use></svg></a><div class=\"tag\">for developers</div></div></footer><div id=\"scroll-to-top-container\" aria-hidden=\"true\"><button id=\"scroll-to-top\" title=\"Back to top\"><svg class=\"icon top\"><use xlink:href=\"/latest/img/icons.svg#top\"></use></svg></button></div></body></html>",
    "headline": "Secure Gateways"
}
